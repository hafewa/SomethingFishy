using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class Invulnerability : MonoBehaviour
{
    public float duration;
    public Color tintColour;

    private Color startTintColor;
    private SpriteFlash spriteFlasher;
    private Health health;

    void Start()
    {
        spriteFlasher = GetComponent<SpriteFlash>();
        health = GetComponent<Health>();
        startTintColor = spriteFlasher.tintColor;
    }

    public void MakeInvulnerable()
    {
        SetInvulerable();
        Invoke("SetVulnerable", duration);
    }

    private void SetInvulerable()
    {
        spriteFlasher.tintColor = tintColour;
        health.isInvulnerable = true;
    }

    private void SetVulnerable()
    {
        spriteFlasher.tintColor = startTintColor;
        health.isInvulnerable = false;
    }
}
